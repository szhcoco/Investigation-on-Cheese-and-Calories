<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=ef7ee2dc43af535679b93c7f5853fba22e80cc79" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Investigation on the Relationship Between the Existence of Cheese in Ingredients and Calories | Investigation-on-Cheese-and-Calories</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Investigation on the Relationship Between the Existence of Cheese in Ingredients and Calories" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Investigation-on-Cheese-and-Calories" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Investigation on the Relationship Between the Existence of Cheese in Ingredients and Calories" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","headline":"Investigation on the Relationship Between the Existence of Cheese in Ingredients and Calories","name":"Investigation-on-Cheese-and-Calories","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1>Investigation-on-Cheese-and-Calories</h1>
        </a>
        <h2></h2>
        
          <a href="https://github.com/szhcoco/Investigation-on-Cheese-and-Calories" class="button"><small>View project on</small> GitHub</a>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1 id="investigation-on-the-relationship-between-the-existence-of-cheese-in-ingredients-and-calories">Investigation on the Relationship Between the Existence of Cheese in Ingredients and Calories</h1>

<p><strong>Name(s)</strong>: Huiting Chen, Coco Sun</p>

<p><strong>Website Link</strong>: <a href="https://szhcoco.github.io/Investigation-on-Cheese-and-Calories/">website</a></p>

<h2 id="overview">Overview</h2>
<p>This is a data science project conducted at UCSD, aiming to investigate on the relationship between the presence of cheese in ingredients and the value of calories. We will walk through the process of data cleaning, checking for missingness dependency, hypothesis testing, building and improving regression models for predictions, as well as performing fairness analysis, to explore the level of significance of cheese and other nutritions that contribute to calories.</p>

<h2 id="introduction">Introduction</h2>
<p>As a dairy made from milk, cheese is rich in nutritions that are essential in maintaining and improving health. The major nutritions include calcium for the growth of bones and teeth, protein that support the development and repair of bone tissues, and vitamins like A and B12 as sources of healthy fat. The nutritions cheese contains determine its importance for people of all ages, and esepcially for children who are in the phase of developing bones and muscles.</p>

<p>In addition to its functionality contributing to health, cheese in food tickles our taste buds and can be added into salads, noodles (Mac &amp; Cheese!), rice, any proteins, pizza, soup… literally anything to make the meal delicious!</p>

<p>The datasets from a <a href="https://www.food.com/">recipe recommendation website</a>, containing recipes and their ratings since 2008. The Food website
offers a massive collecion of recipes categorized by popularity, ingredients, cuisines, and meal type. It serves as a platform where recipes are published with photos where people could comment, reply, and post photos to show their work after trying them. It also contains information about ingredients thus we are able to identify recipes containing cheese.</p>

<p>Despite its popularity and importance as an ingredient for food, concerns have been raised about the health issues related to cheese. In addition to its nutritions, cheese are considered as a high-calory ingredient, and over consumption of high-calory food may lead to increase in weight and obesity, diabetes, or heart disease that would risk life.</p>

<p>Our goal in this project is to answer the question of <strong>whether food with cheese tends to have high calories</strong>, as well as to identify nutritions that play an important role in determining the calories of a recipe. By examining the relationship between nutritions and calories, we will provide insights for home cooks to find appealling recipes, enjoying their food while eating healthily, assist creations of balanced meals, and guide food platforms in improving their recommendation system. Based on the diversity and the large volumn of recipes that the website provides, we consider it as a representative dataset for further analysis.</p>

<h4 id="introduction-to-the-columns">Introduction to the Columns</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">RAW_recipes</code> dataset: 83,782 rows and 12 columns, containing information about each recipe.</li>
</ul>

<table border="1">
    <thead>
    <tr style="text-align: middle;">
      <th>Column</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>'name'</td>
      <td>Recipe name</td>
    </tr>
    <tr>
      <td>'id'</td>
      <td>Recipe ID</td>
    </tr>
    <tr>
      <td>'minutes'</td>
      <td>Minutes to prepare recipe</td>
    </tr>
    <tr>
      <td>'contributor_id'</td>
      <td>User ID who submitted this recipe</td>
    </tr>
    <tr>
      <td>'submitted'</td>
      <td>Date recipe was submitted</td>
    </tr>
    <tr>
        <td>'tags'</td>
        <td>Food.com tags for recipe</td>
    </tr>
    <tr>
      <td>'nutrition'</td>
      <td>Nutrition information in the form [calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]; PDV stands for “percentage of daily value”</td>
    </tr>
    <tr>
      <td>'n_steps'</td>
      <td>DNumber of steps in recipe</td>
    </tr>
    <tr>
      <td>'steps'</td>
      <td>Text for recipe steps, in order</td>
    </tr>
    <tr>
      <td>''description'</td>
      <td>User-provided description</td>
    </tr>
  </tbody>
 </table>

<ul>
  <li><code class="language-plaintext highlighter-rouge">RAW_interactions</code> dataset: 731,927 rows and 5 columns, recording users’ ratings and comments for different recipes.</li>
</ul>

<table border="1">
    <thead>
    <tr style="text-align: right;">
      <th>Column</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>'user_id'</td>
      <td>User ID</td>
    </tr>
    <tr>
      <td>'recipe_id'</td>
      <td>Recipe ID</td>
    </tr>
    <tr>
      <td>'date'</td>
      <td>Date of interaction</td>
    </tr>
    <tr>
      <td>'rating'</td>
      <td>Rating given</td>
    </tr>
    <tr>
      <td>'review'</td>
      <td>Review text</td>
    </tr>
  </tbody>
 </table>

<p>To address our problem, we need to focus on column <code class="language-plaintext highlighter-rouge">nutrition</code> and <code class="language-plaintext highlighter-rouge">ingredient</code>, from which we will extract new values into columns added to the dataframe later in the cleaning process.</p>

<h2 id="data-cleaning-and-exploratory-data-analysis">Data Cleaning and Exploratory Data Analysis</h2>

<h3 id="data-cleaning">Data Cleaning</h3>
<ol>
  <li>Clean the <code class="language-plaintext highlighter-rouge">RAW_recipes</code> dataframe before merge
    <ul>
      <li>Removing column <code class="language-plaintext highlighter-rouge">Unnamed: 0</code> since it does not contain any useful information.</li>
    </ul>
  </li>
  <li>Examine the types of the <code class="language-plaintext highlighter-rouge">RAW_recipes</code> column values</li>
</ol>

<table>
  <thead>
    <tr>
      <th style="text-align: center">column</th>
      <th style="text-align: center">type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">name</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">id</td>
      <td style="text-align: center">int64</td>
    </tr>
    <tr>
      <td style="text-align: center">minutes</td>
      <td style="text-align: center">int64</td>
    </tr>
    <tr>
      <td style="text-align: center">contributor_id</td>
      <td style="text-align: center">int64</td>
    </tr>
    <tr>
      <td style="text-align: center">submitted</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">tags</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">nutrition</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">n_steps</td>
      <td style="text-align: center">int64</td>
    </tr>
    <tr>
      <td style="text-align: center">steps</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">description</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">ingredients</td>
      <td style="text-align: center">object</td>
    </tr>
    <tr>
      <td style="text-align: center">n_ingredients</td>
      <td style="text-align: center">int64</td>
    </tr>
  </tbody>
</table>

<p>We notice that the <code class="language-plaintext highlighter-rouge">nutrition</code> and <code class="language-plaintext highlighter-rouge">ingredients</code> are <code class="language-plaintext highlighter-rouge">object</code>, so we want to do transforming of these columns.</p>

<ol>
  <li>Convert each nutrition into single column
    <ul>
      <li>For <code class="language-plaintext highlighter-rouge">nutrition</code>, each row is a lise-list srings storing values in the form <code class="language-plaintext highlighter-rouge">[calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]</code>. Since all values are important for later investigation, we want to get access to them easier, so we:
        <ul>
          <li>remove the first and last character of the original nutrition and split the rest by ‘,’.</li>
          <li>use <code class="language-plaintext highlighter-rouge">apply</code> to get the value for each component and convert them to <code class="language-plaintext highlighter-rouge">float</code>.</li>
          <li>add new columns: <code class="language-plaintext highlighter-rouge">calories</code>, <code class="language-plaintext highlighter-rouge">total_fat</code>, <code class="language-plaintext highlighter-rouge">sugar</code>, <code class="language-plaintext highlighter-rouge">sodium</code>, <code class="language-plaintext highlighter-rouge">protein</code>, <code class="language-plaintext highlighter-rouge">saturated_fat</code>, <code class="language-plaintext highlighter-rouge">carbohydrates</code> into <code class="language-plaintext highlighter-rouge">RAW_recipes</code>.</li>
          <li>name a new dataframe after transforming the <code class="language-plaintext highlighter-rouge">RAW_recipes</code> called <code class="language-plaintext highlighter-rouge">recipes</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Create <code class="language-plaintext highlighter-rouge">cheese</code> column to <code class="language-plaintext highlighter-rouge">recipes</code>
    <ul>
      <li>For <code class="language-plaintext highlighter-rouge">ingredients</code>, we only care about whether cheese is presense in the long string in order to invest the relationship between calories and cheese:
        <ul>
          <li>use regular expression to find term <code class="language-plaintext highlighter-rouge">cheese</code> in <code class="language-plaintext highlighter-rouge">ingredients</code>, and create a new column <code class="language-plaintext highlighter-rouge">cheese</code> with <code class="language-plaintext highlighter-rouge">boolean</code> values indicating if there is cheese in ingredients.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Merge dataframes into a dataset called <code class="language-plaintext highlighter-rouge">combine</code>
    <ul>
      <li>We left merge <code class="language-plaintext highlighter-rouge">RAW_interactions</code> to <code class="language-plaintext highlighter-rouge">recipes</code> on <code class="language-plaintext highlighter-rouge">id</code> in <code class="language-plaintext highlighter-rouge">recipes</code> and <code class="language-plaintext highlighter-rouge">recipe_id</code> in <code class="language-plaintext highlighter-rouge">RAW_interactions</code>.</li>
    </ul>
  </li>
  <li>Replace all ratings of 0.0 to <code class="language-plaintext highlighter-rouge">nan</code> in <code class="language-plaintext highlighter-rouge">RAW_interactions</code>
    <ul>
      <li>Valid ratings only include 1, 2, 3, 4, 5, and ratings of 0.0 indicates that no rating is given in the interaction, which contains no actual meaning.</li>
    </ul>
  </li>
  <li>Compute average rating
    <ul>
      <li>We calculate the average rating for each recipe as new column <code class="language-plaintext highlighter-rouge">avg_rating</code>, so it can better demonstrate the overall ratings of the recipe.</li>
      <li>Merge the <code class="language-plaintext highlighter-rouge">avg_rating</code> to the <code class="language-plaintext highlighter-rouge">combine</code>.</li>
    </ul>
  </li>
</ol>

<p>After cleaning, there are 234429 rows and 29 columns in <code class="language-plaintext highlighter-rouge">combine</code>. Here we display the first five rows of the dataframe with 10 columns that will be mainly used for further investigation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">name</th>
      <th style="text-align: center">calories</th>
      <th style="text-align: center">total_fat</th>
      <th style="text-align: center">sugar</th>
      <th style="text-align: center">sodium</th>
      <th style="text-align: center">protein</th>
      <th style="text-align: center">saturated_fat</th>
      <th style="text-align: center">carbohydrates</th>
      <th style="text-align: center">cheese</th>
      <th style="text-align: center">rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1 brownies in the world    best ever</td>
      <td style="text-align: center">138.4</td>
      <td style="text-align: center">10</td>
      <td style="text-align: center">50</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">19</td>
      <td style="text-align: center">6</td>
      <td style="text-align: center">False</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">1 in canada chocolate chip cookies</td>
      <td style="text-align: center">595.1</td>
      <td style="text-align: center">46</td>
      <td style="text-align: center">211</td>
      <td style="text-align: center">22</td>
      <td style="text-align: center">13</td>
      <td style="text-align: center">51</td>
      <td style="text-align: center">26</td>
      <td style="text-align: center">False</td>
      <td style="text-align: center">5</td>
    </tr>
    <tr>
      <td style="text-align: center">412 broccoli casserole</td>
      <td style="text-align: center">194.8</td>
      <td style="text-align: center">20</td>
      <td style="text-align: center">6</td>
      <td style="text-align: center">32</td>
      <td style="text-align: center">22</td>
      <td style="text-align: center">36</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">True</td>
      <td style="text-align: center">5</td>
    </tr>
    <tr>
      <td style="text-align: center">412 broccoli casserole</td>
      <td style="text-align: center">194.8</td>
      <td style="text-align: center">20</td>
      <td style="text-align: center">6</td>
      <td style="text-align: center">32</td>
      <td style="text-align: center">22</td>
      <td style="text-align: center">36</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">True</td>
      <td style="text-align: center">5</td>
    </tr>
    <tr>
      <td style="text-align: center">412 broccoli casserole</td>
      <td style="text-align: center">194.8</td>
      <td style="text-align: center">20</td>
      <td style="text-align: center">6</td>
      <td style="text-align: center">32</td>
      <td style="text-align: center">22</td>
      <td style="text-align: center">36</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">True</td>
      <td style="text-align: center">5</td>
    </tr>
  </tbody>
</table>

<h3 id="univariate-analysis">Univariate Analysis</h3>
<p>First, we will examine the distribution of  calories from the <code class="language-plaintext highlighter-rouge">recipes</code> dataframe.</p>

<iframe src="assets/hist_calories_total.html" width="800" height="600" frameborder="0"></iframe>

<p>But as one can see from the plot, the distribution mostly concentrates on the very left. The outliers at the right tail makes the distribution hard to be examined.</p>

<p>Then we remove the outliers to focus on values less and equal to 990.</p>

<iframe src="assets/hist_calories.html" width="800" height="600" frameborder="0"></iframe>

<p>By removing the outliers in the histogram, we can more clearly observe that the distribution is skewed to the left, with the majority of data concentrated between 50 and 400 calories, and a peak at around 180. This is quite surprising, as the distribution suggests that more recipes promoting a healthy diet have been published. After the peak there is a decrease of the count of recipes, corresponding with higher calories.</p>

<h3 id="bivariate-analysis">Bivariate Analysis</h3>
<p>For bivariate analysis, we will examine the distribution of calories with and without cheese, also with outliers removed to better visualization.</p>

<iframe src="assets/fig_with_without_cheese.html" width="800" height="600" frameborder="0"></iframe>

<p>We can see that both distributions skew to the left, but the peak of distribution of calories without cheese is on the left of the distribution with cheese. We will further investigate in later sections on whether having cheese in recipes tend to have higher calories.</p>

<p>[more analysis here??]</p>

<h3 id="grouping-and-aggregates">Grouping and Aggregates</h3>
<p>An interesting aggregate that we find is shown in the pivot table below.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Year</th>
      <th style="text-align: right">(‘diff_prop’, 0.0)</th>
      <th style="text-align: right">(‘diff_prop’, 1.0)</th>
      <th style="text-align: right">(‘diff_prop’, 2.0)</th>
      <th style="text-align: right">(‘diff_prop’, 3.0)</th>
      <th style="text-align: right">(‘diff_prop’, 4.0)</th>
      <th style="text-align: right">(‘diff_prop’, 5.0)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">2008</td>
      <td style="text-align: right">-0.00417087</td>
      <td style="text-align: right">0.0373018</td>
      <td style="text-align: right">0.0314886</td>
      <td style="text-align: right">0.0339742</td>
      <td style="text-align: right">0.0296494</td>
      <td style="text-align: right">0.00595056</td>
    </tr>
    <tr>
      <td style="text-align: right">2009</td>
      <td style="text-align: right">-0.00117979</td>
      <td style="text-align: right">0.0121839</td>
      <td style="text-align: right">-0.00573415</td>
      <td style="text-align: right">0.0251196</td>
      <td style="text-align: right">0.00886583</td>
      <td style="text-align: right">0.0102082</td>
    </tr>
    <tr>
      <td style="text-align: right">2010</td>
      <td style="text-align: right">-0.00931341</td>
      <td style="text-align: right">0.00106069</td>
      <td style="text-align: right">0.0427559</td>
      <td style="text-align: right">-0.00798016</td>
      <td style="text-align: right">-0.00647318</td>
      <td style="text-align: right">-0.00948729</td>
    </tr>
    <tr>
      <td style="text-align: right">2011</td>
      <td style="text-align: right">0.00977973</td>
      <td style="text-align: right">-0.00940128</td>
      <td style="text-align: right">0.00721202</td>
      <td style="text-align: right">0.0137947</td>
      <td style="text-align: right">-0.00071431</td>
      <td style="text-align: right">-0.00714992</td>
    </tr>
    <tr>
      <td style="text-align: right">2012</td>
      <td style="text-align: right">0.023112</td>
      <td style="text-align: right">-0.00471617</td>
      <td style="text-align: right">0.016432</td>
      <td style="text-align: right">-0.00377306</td>
      <td style="text-align: right">-0.00190885</td>
      <td style="text-align: right">0.0127113</td>
    </tr>
    <tr>
      <td style="text-align: right">2013</td>
      <td style="text-align: right">0.022195</td>
      <td style="text-align: right">0.00508453</td>
      <td style="text-align: right">0.000573415</td>
      <td style="text-align: right">-0.014781</td>
      <td style="text-align: right">-0.00979702</td>
      <td style="text-align: right">0.00557635</td>
    </tr>
    <tr>
      <td style="text-align: right">2014</td>
      <td style="text-align: right">0.00269153</td>
      <td style="text-align: right">0.0326774</td>
      <td style="text-align: right">0.00872339</td>
      <td style="text-align: right">-0.0103835</td>
      <td style="text-align: right">-0.00499667</td>
      <td style="text-align: right">0.00335626</td>
    </tr>
    <tr>
      <td style="text-align: right">2015</td>
      <td style="text-align: right">-0.0104338</td>
      <td style="text-align: right">-0.0132254</td>
      <td style="text-align: right">-0.0242568</td>
      <td style="text-align: right">-0.0121251</td>
      <td style="text-align: right">-0.00482612</td>
      <td style="text-align: right">-0.00185076</td>
    </tr>
    <tr>
      <td style="text-align: right">2016</td>
      <td style="text-align: right">-0.0105039</td>
      <td style="text-align: right">-0.0162877</td>
      <td style="text-align: right">-0.0174133</td>
      <td style="text-align: right">-0.00873181</td>
      <td style="text-align: right">-0.00184123</td>
      <td style="text-align: right">-0.00384644</td>
    </tr>
    <tr>
      <td style="text-align: right">2017</td>
      <td style="text-align: right">-0.0131052</td>
      <td style="text-align: right">-0.0247924</td>
      <td style="text-align: right">-0.0407065</td>
      <td style="text-align: right">-0.00617981</td>
      <td style="text-align: right">-0.00443334</td>
      <td style="text-align: right">-0.00802292</td>
    </tr>
    <tr>
      <td style="text-align: right">2018</td>
      <td style="text-align: right">-0.00907127</td>
      <td style="text-align: right">-0.0198854</td>
      <td style="text-align: right">-0.0190744</td>
      <td style="text-align: right">-0.00893407</td>
      <td style="text-align: right">-0.00352448</td>
      <td style="text-align: right">-0.0074453</td>
    </tr>
  </tbody>
</table>

<p>The pivot table is aimed to examine the <code class="language-plaintext highlighter-rouge">diff_prop</code> which is calculated by <code class="language-plaintext highlighter-rouge">prop_cheese_recipes - prop_nocheese_recipes</code> across years from 2008 to 2018, given the level of rating. Positive values indicate there are more recipes with cheese, and on the other hand negative values indicate more recipes without cheese.</p>

        </section>

        <aside id="sidebar">
          

          
            <p class="repo-owner"><a href="https://github.com/szhcoco/Investigation-on-Cheese-and-Calories">Investigation-on-Cheese-and-Calories</a> is maintained by <a href="https://github.com/szhcoco">szhcoco</a>.</p>
          

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

  </body>
</html>
